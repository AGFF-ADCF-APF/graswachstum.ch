{% extends "forms/fields/textarea/textarea.html.twig" %}

{% block group %}
{{ parent() }}
{% set autogenerated = seomagic_description() %}
<div class="seomagic-title">
  {% if field.source == 'opengraph' %}
    <div class="seo-msg">
      <div class="seomagic-label">{{ 'PLUGIN_SEOMAGIC.CURRENT_OPENGRAPH'|tu }}:</div>
      <div>{{ attribute(seomagic_metadata, 'og:description') }}</div>
    </div>
  {% elseif field.source == 'metadata' %}
    <div class="seo-msg">
      <div class="seomagic-label">{{ 'PLUGIN_SEOMAGIC.CURRENT_METADATA'|tu }}:</div>
      <div>{{ attribute(seomagic_metadata, 'description') }}</div>
    </div>
  {% elseif autogenerated %}
    <div class="seo-msg">
      <div class="seomagic-label">{{ 'PLUGIN_SEOMAGIC.AUTO_GENERATED'|tu }}:</div>
      <div>{{ autogenerated }}</div>
    </div>
  {% endif %}
</div>
{% set ai_pro_enabled = config.plugins['ai-pro'].enabled ?? false %}
<div class="seomagic-ai-tools">
  {% if ai_pro_enabled %}
    <button type="button" class="button seomagic-ai" data-purpose="description">AI: Suggest Description</button>
  {% else %}
    <span class="hint--bottom" data-hint="{{ 'PLUGIN_SEOMAGIC.AI_PRO_REQUIRED'|tu }}"><button type="button" class="button seomagic-ai" disabled style="pointer-events: none;">AI: Suggest Description</button></span>
  {% endif %}
  <textarea class="seomagic-body" style="display:none">{{ seomagic_body }}</textarea>
  {% if ai_pro_enabled %}<small class="muted">{{ 'PLUGIN_SEOMAGIC.AI_SUGGEST_DESC_HELP'|tu }}</small>{% endif %}
</div>
{% endblock %}
